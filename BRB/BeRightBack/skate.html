<!DOCTYPE html>
<html lang="en">

<head>

    <link rel="manifest" href="manifest.json">
 	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="application-name" content="BRB">
	<meta name="apple-mobile-web-app-title" content="BRB">
	<meta name="msapplication-starturl" content="/https://jeromesalazar.github.io/BeRightBack/">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>Be Right Back</title>

  <!-- Custom fonts -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic" rel="stylesheet" type="text/css">
  <!-- Custom styles for this template -->
  <link href="css/styles.css" rel="stylesheet">
  <!-- Website Icon -->
  <link href="img/BRBIcon.png" rel="icon">
</head>

  <body id="page-top" onload="init()">

<!-- Navigation -->
  <nav class="navbar" id="mainNav">
    <div class="brand-name">
      <a class="navbar-brand" href="#page-top">Be Right Back</a>
        <a href="index.html" class="go-button">Go Back</a>
    </div>
  </nav>
      
      
<!-- Header Ride -->
  <div class="head-ride">
            <img class="img-head-ride" src="img/skate.jpg" alt="BRB RollerSkate" title="Roller Skate">
    </div>
      
     <!-- Input Section -->
            <section id="input">
              <div class="container">
                <h2>Skate</h2>
                  <hr><img class="img-ride" src="img/skateIcon.png" alt="BRB Skate">
                    <form id="saveInput" class="floating-label-form-group">
                        Name:<br><input class="form-control" type="text" id="name" required><br><br>
                        Phone Number:<br><input class="form-control" type="tel" id="phone" required><br><br>
                        Type of Skate:<br><select class="form-control" id="type" required>
                            <option value="" selected></option>
                            <option value="SKATES">ROLLER SKATES</option>
                            <option value="BLADES">ROLLER BLADES</option>
                                        </select><br><br>
                        Number of Skate:<input class="form-control" type="number" min="1" id="number" required><br><br>
                        Time-In:<br><input class="form-control" type="time" id="timein" required><br><br>
                        Time-Out:<br><input class="form-control" type="time" id="timeout" required><br><br>
                        Price:<br><input class="form-control" type="number" min="20" step="5" id="price" required><br><br>
                        <br>
                  </form>
                            <form class="form-button">
                                <input class="add" type="button" onclick="myFunction();myEntryFunction()" value="Submit" id="submit">
                                <input class="cancel" type="reset" onclick="resetFunction()" value="Cancel" id="cancel">
                            </form>
                        <br><br>
                  </div>
    </section>
                          
    <!-- About Rentals -->
    <section class="bg-primary">
      <div class="container">
        <h2 class="text-primary">Rentals</h2>
          <hr>
        </div>
            <table id="myTable">
            <tr>
		      <th>Name</th>
		      <th>Phone Number</th>
		      <th>Type of Skate</th>
		      <th>Number of Skates</th>
		      <th>Time In</th>
		      <th>Time Out</th>
		      <th>Price</th>
            </tr>
            </table>
            <br><br>
    </section>

<!-- Breakdown Section -->
  <section class="bg-secondary">
    <div class="container">
        <h2 class="text-primary">Breakdown</h2>
    </div>
      <hr>
      <table id="myEntries">
      <tfoot>
          <tr>
          <td>Total:</td>
          <th id="total">P0.00</th>
          </tr>
      </tfoot>
    </table>
  </section>
 
<!-- Footer -->
<footer class="footer">
    <div class="second" title="About BRB"> 
        <h4>About BRB</h4>
        <p>BRB, means Be Right Back or also known as Bike, Roller Skate, Boats, is a Progressive Web Application used for renting rides such as bikes, roller skates, and boats in Burnham Park.</p>
    </div>
    
    <div class="third" title="Location: Burnham Park, Baguio City">
        <h4>Location</h4>
          <p>Burnham Park, Baguio City
            <br>
          </p>
    </div>
    
    <div class="social">
    <h4>Connect With Us</h4>
    
    <a href="https://facebook.com"><img src="img/facebook-icon.png"  class="socialfa" alt="facebook-icon" title="Facebook"></a>
    <a href="https://twitter.com"><img src="img/twitter-icon.png"  class="socialtw" alt="twitter-icon" title="Twitter"></a>
    <a href="https://instagram.com"><img src="img/instagram-icon.png"  class="socialig" alt="instagram-icon" title="Instagram"></a>
    </div>
</footer>   
    
    <!-- Scroll to Top Button -->
    <button onclick="topFunction()" id="up" title="Go up"><img class="img-up" src="img/upIcon.png" alt="up-icon"> </button>

    <script>
        window.onscroll = function() {scrollFunction()};

        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            document.getElementById("up").style.display = "block";
        } else {
            document.getElementById("up").style.display = "none";
            }
        }

        function topFunction() {
            document.body.scrollTop = 0;
            document.documentElement.scrollTop = 0;
        }
    </script>
      
    <!-- Service Worker -->
	<script type="text/javascript">
	//This is the service worker with the combined offline experience (Offline page + Offline copy of pages)

        //Add this below content to your HTML page, or add the js file to your page at the very top to register sercie worker
        if (navigator.serviceWorker.controller) {
            console.log('[PWA Builder] active service worker found, no need to register')
        } else {

            //Register the ServiceWorker
        navigator.serviceWorker.register('pwabuilder-sw.js', {
            scope: './'
            }).then(function(reg) {
            console.log('Service worker has been registered for scope:'+ reg.scope);
            });
        }
	</script>
      
    <script>
          function myFunction() {
            var table = document.getElementById("myTable");
            var row = table.insertRow(1);
            var cell1 = row.insertCell(0);
            var cell2 = row.insertCell(1);
            var cell3 = row.insertCell(2);
            var cell4 = row.insertCell(3);
            var cell5 = row.insertCell(4);
            var cell6 = row.insertCell(5);
            var cell7 = row.insertCell(6);
		 
		var a = document.getElementById("name").value;
		var b = document.getElementById("phone").value;
        var c = document.getElementById("type").value;
		var d = document.getElementById("number").value;
		var e = document.getElementById("timein").value;
		var f = document.getElementById("timeout").value;
		var g = document.getElementById("price").value;
		
        document.getElementById('name').value = '';
        document.getElementById('phone').value = '';
        document.getElementById('type').value = '';
        document.getElementById('number').value = '';
        document.getElementById('timein').value = '';
        document.getElementById('timeout').value = '';
        document.getElementById('price').value = '';
      
        alert("You've added a new input data!");
              
		cell1.innerHTML = a;
        cell2.innerHTML = b;
		cell3.innerHTML = c;
		cell4.innerHTML = d;
		cell5.innerHTML = e;
		cell6.innerHTML = f;
		cell7.innerHTML = g;
        
        setTimeout( function ( ) { alert( "The time has now started!" ); }, 10000 );     
          }  
      </script>
      
      <script>
      function resetFunction() {
          document.getElementById("saveInput").reset();
      }
      </script>
      
        <script>
        var total = 0;
                  
        document.getElementById('saveInput').onsubmit = enter;

        function myEntryFunction() {
            
            var entry = document.getElementById('price').value;
            var entry = parseFloat(entry);
                currency = currencyFormat(entry);
                document.getElementById('myEntries').innerHTML += '<tr><td></td><td>' + currency + '</td></tr>';
                total += entry;
                document.getElementById('total').innerHTML = currencyFormat(total);
  
                document.getElementById('price').value = '';
                return false;
        }

        function currencyFormat(number) {
            var currency = parseFloat(number);
            currency = currency.toFixed(2);
            currency = 'P' + currency;
            return currency;
        }
    </script>
      
      <script>
        window.onload = function() {

  // Check for LocalStorage support.
  if (localStorage) {

    // Add an event listener for form submissions
    document.getElementById('saveInput').addEventListener('submit', function() {
      // Get the value of the name field.
      var name = document.getElementById('name').value;

      // Save the name in localStorage.
      localStorage.setItem('name', name);
    });

  }

}
      </script>
      
      <script>
var db;
// until we won't need this prefix mess
var indexedDB = window.indexedDB || window.webkitIndexedDB 
             || window.mozIndexedDB || window.msIndexedDB;
var IDBTransaction = window.IDBTransaction || 
                     window.webkitIDBTransaction;
// The initialization of our stuff
function init() {
  var dbVersion = 1.0;
  var openRequest = indexedDB.open("brb_rollerskate", dbVersion);
    //handle setup - as the spec like it
    openRequest.onupgradeneeded = function(e) {
      console.log("running onupgradeneeded");
      var thisDb = e.target.result;
      //temp delete if we want to start clean -> 
      //thisDb.deleteObjectStore("note");
      //Create Note
      if(!thisDb.objectStoreNames.contains("note")) {
        console.log("I need to make the note objectstore");
        var objectStore = thisDb.createObjectStore("note", 
            { keyPath: "id", autoIncrement:true });  
        objectStore.createIndex("title", "title", 
            { unique: false });
      }
    }
    openRequest.onsuccess = function(e) {
      db = e.target.result;
      db.onerror = function(event) {
        // Generic error handler for all 
        // errors targeted at this database
        alert("Database error: " + event.target.errorCode);
        console.dir(event.target);
      };
        // Interim solution for Chrome to create an objectStore. 
        // Will be deprecated once it's fixed.
        if (db.setVersion) {
          console.log("in old setVersion: "+ db.setVersion);
            if (db.version != dbVersion) {
                var req = db.setVersion(dbVersion);
                req.onsuccess = function () {
                    var ob = db.createObjectStore("note",
                            { keyPath: "id", autoIncrement:true });  
                    ob.createIndex("title", 
                            "title", { unique: false });
                    var trans = req.result;
                    trans.oncomplete = function(e) {
                      console.log("== trans oncomplete ==");
                      displayNotes();
                    }
                };
            }
            else {
                displayNotes();
            }
        }
        else {
            displayNotes();
        }
    }
    function displayNotes() {
      console.log("TODO - print something nice on the page");
    }
    //TEMP TO REMOVE
    document.querySelector("#submit").addEventListener("click", function() {
      var transaction = db.transaction(["note"], "readwrite");  
      transaction.oncomplete = function(event) {
          console.log("All done!");
      };
      transaction.onerror = function(event) {
        // Don't forget to handle errors!
        console.dir(event);
      };
      var objectStore = transaction.objectStore("note");
      //use put versus add to always write, even if exists
      var request = objectStore.add( {title:"note 1",
          body:"this is the body " + 
          Math.floor(Math.random()*1000) });
      request.onsuccess = function(event) {
        console.log("done with insert");
      };
      objectStore.openCursor().onsuccess = function(event) {  
        var cursor = event.target.result;  
        if (cursor) {  
          console.log(cursor.key);
          console.dir(cursor.value);
          cursor.continue();  
        }  
        else {  
          console.log("Done with cursor");
        }  
      };  
    });
}
</script>

  </body>
</html>
